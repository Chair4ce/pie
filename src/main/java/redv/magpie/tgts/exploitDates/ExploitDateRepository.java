package redv.magpie.tgts.exploitDates;

import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Query;

import java.sql.Timestamp;
import java.util.List;

public interface ExploitDateRepository extends JpaRepository<ExploitDate, Long> {
  @Query("SELECT date FROM ExploitDate date WHERE date.rfiId = ?1 AND date.deleted IS NULL")
  List<ExploitDate> findAllByRfiId(Long rfiId);

  @Query("SELECT date FROM ExploitDate date WHERE date.rfiId = ?1 AND date.exploitDate = ?2 AND date.deleted IS NULL")
  ExploitDate findByRfiIdAndExploitDate(Long rfiId, Timestamp exploitDate);

  List<ExploitDate> findAllByDeletedIsNotNull();

  ExploitDate findByIdAndDeletedIsNull(long exploitDateId);
}
